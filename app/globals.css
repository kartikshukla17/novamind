@tailwind base;
@tailwind components;
@tailwind utilities;

/* Lenis smooth scroll */
html.lenis, html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-smooth iframe {
  pointer-events: none;
}

@layer base {
  :root {
    --background: 250 250 249;
    --foreground: 28 25 23;
    --card: 255 255 255;
    --card-foreground: 28 25 23;
    --primary: 99 102 241;
    --primary-foreground: 255 255 255;
    --accent: 245 158 11;
    --accent-foreground: 255 255 255;
    --muted: 245 245 244;
    --muted-foreground: 120 113 108;
    --border: 231 229 228;
    --ring: 99 102 241;

    /* Safe area insets for mobile devices (notch, rounded corners) */
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
  }

  * {
    border-color: rgb(var(--border));
  }

  body {
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
    font-feature-settings: "rlig" 1, "calt" 1;

    /* Support for safe areas on mobile devices */
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
  }

  /* Selection styling */
  ::selection {
    background-color: rgb(var(--primary) / 0.2);
    color: inherit;
  }
}

@layer components {
  /* Glass morphism effect */
  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Gradient text */
  .gradient-text {
    background: linear-gradient(135deg, rgb(var(--primary)) 0%, rgb(var(--accent)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Masonry layout â€“ multi-column so items stack with varying heights */
  .masonry-grid {
    column-gap: 1.25rem;
    column-fill: balance;
  }

  .masonry-grid {
    columns: 2;
  }

  @media (min-width: 640px) {
    .masonry-grid {
      columns: 2;
      column-gap: 1.5rem;
    }
  }

  @media (min-width: 768px) {
    .masonry-grid {
      columns: 3;
      column-gap: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .masonry-grid {
      columns: 4;
      column-gap: 1.5rem;
    }
  }

  @media (min-width: 1280px) {
    .masonry-grid {
      columns: 5;
    }
  }

  /* Prevent cards from breaking across columns */
  .masonry-grid > * {
    break-inside: avoid;
    margin-bottom: 1.25rem;
  }

  @media (min-width: 768px) {
    .masonry-grid > * {
      margin-bottom: 1.5rem;
    }
  }

  /* Bento grid for features */
  .bento-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  @media (min-width: 768px) {
    .bento-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .bento-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* Card hover effect */
  .card-hover {
    @apply transition-all duration-300 ease-out;
  }

  .card-hover:hover {
    @apply -translate-y-1 shadow-soft-lg;
  }

  /* Button styles */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 bg-primary-600 text-white font-medium rounded-xl;
    @apply hover:bg-primary-700 active:scale-[0.98] transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 bg-warm-100 text-warm-900 font-medium rounded-xl;
    @apply hover:bg-warm-200 active:scale-[0.98] transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-warm-400 focus:ring-offset-2;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 text-warm-600 font-medium rounded-lg;
    @apply hover:bg-warm-100 active:scale-[0.98] transition-all duration-200;
  }

  /* Nav link with dot indicator */
  .nav-link {
    @apply relative flex items-center gap-2 text-warm-600 hover:text-warm-900 transition-colors;
  }

  .nav-link::before {
    content: '';
    @apply w-1.5 h-1.5 rounded-full bg-current opacity-0 transition-opacity;
  }

  .nav-link:hover::before,
  .nav-link.active::before {
    @apply opacity-100;
  }

  /* Stagger animation delays */
  .stagger-1 { animation-delay: 0.1s; }
  .stagger-2 { animation-delay: 0.2s; }
  .stagger-3 { animation-delay: 0.3s; }
  .stagger-4 { animation-delay: 0.4s; }
  .stagger-5 { animation-delay: 0.5s; }
  .stagger-6 { animation-delay: 0.6s; }
}

@layer utilities {
  /* Noise texture overlay */
  .noise {
    position: relative;
  }

  .noise::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    pointer-events: none;
  }

  /* Hide scrollbar utility */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Text balance for headings */
  .text-balance {
    text-wrap: balance;
  }

  /* Safe area padding utilities for mobile */
  .safe-top {
    padding-top: var(--safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: var(--safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: var(--safe-area-inset-left);
  }

  .safe-right {
    padding-right: var(--safe-area-inset-right);
  }

  .safe-x {
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
  }

  .safe-y {
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
  }

  .safe-all {
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
  }
}

/* Custom scrollbar - light */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgb(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--muted-foreground) / 0.5);
}

/* Animation classes for scroll reveal */
.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Focus visible styles */
:focus-visible {
  outline: 2px solid rgb(var(--ring));
  outline-offset: 2px;
}

/* Smooth image loading */
img {
  opacity: 1;
  transition: opacity 0.3s ease;
}

img[data-loading="true"] {
  opacity: 0;
}
